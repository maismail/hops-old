<?xml version="1.0" encoding="UTF-8"?>
<section version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:ns5="http://www.w3.org/2000/svg"
         xmlns:ns4="http://www.w3.org/1998/Math/MathML"
         xmlns:ns3="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
    <title>Defining Clusters</title>

    <para>
        In this section, we describe the tools we offer in order to easily define and structure your clusters
        for their deployment through our orchestration architecture from the  dashboard. In here, we will introduce
        you to our definition language to define clusters for cloud providers like Amazon EC2 and OpenStack
        or Baremetal clusters based on physical machines. Also we will give you hints and aspects you
        should consider when structuring your cluster with our language. With our cluster definition language,
        you will see that you will easily have a cluster deployed in a matter of minutes by making use of technologies
        like Chef that will be in charge of orchestrating the nodes while we provision them with Jclouds (in the case
        of a virtual environment) or a simple SSH client for your baremetal machines.
    </para>
    <section>
        <title>Cluster Domain Specific Language:</title>
        <para>
            We will start first by presenting our cluster DSL with which you will be capable of defining in a simple
            manner the structure of your clusters while including extra information in relation to the type of 
            environment you want to deploy your cluster. In general, we handle the following abstractions:
            <itemizedlist>
                <listitem>
                    <para>
                        <emphasis>Cluster:</emphasis>
                        A cluster is an entity that defines a whole system based on a heterogenous structure composed
                        of multiple nodes. In most of the cases, we can classify the nodes into groups depending of
                        the software they run. Also you need to provide the specific class tag of the type of cluster
                        you want to deploy apart from other properties of interest like extra services you want to deploy
                        in all of the nodes of the cluster.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Services:</emphasis>
                        We identify multiple services, in our case related to HOPstart platform. You can spread this
                        services quite easily among different nodes just indicating that information when grouping
                        them.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Provider:</emphasis>
                        In the case of defining a cluster to be deployed in a virtualized environment through an
                        Amazon EC2 infrastructure or an OpenStack environment, you can give information of
                        the image you want to use, the type of instance to request, login credentials in case you
                        are using custom images.
                    </para>
                </listitem>
            </itemizedlist>
        </para>
        <para>
            We will also see that the syntax differs depending if you are designing your cluster towards a 
            virtualized environment or a physical environment. In the following sections, we will go through 
            detailed examples for both types of clusters.
        </para>
    </section>
    <section>
        <title>Structuring your Cluster:</title>
        <para>
            Before using our tools, it is important that you have at least an idea of how you want to structure
            the services of our data platform among the different machines that will be part of the cluster.
            In our case, a fully functional cluster requires the following services deployed in different machines:
            <orderedlist>
                <listitem>
                    <para>
                        <emphasis>MySQL Cluster:</emphasis>
                        <itemizedlist>
                            <listitem>
                                <para>
                                    <emphasis>MySQL-NDB:</emphasis>
                                    Your cluster should contain at least 2 instances of NDB
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>MySQL-MGM:</emphasis>
                                    Your cluster should contain at least 1 instance of a Management Server.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>MySQL-Mysqld:</emphasis>
                                    Your cluster should contain at least 1 instance of a MySQL Server.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>HOPStart</emphasis>
                        <itemizedlist>
                            <listitem>
                                <para>
                                    <emphasis>Namenode:</emphasis>
                                    Your cluster should contain at least 2 namenode instances of our Hadoop Solution.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>Datanode:</emphasis>
                                    Your cluster should contain at least 2 datanode instances of our Hadoop Solution.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Data processing</emphasis>
                        <itemizedlist>
                            <listitem>
                                <para>
                                    <emphasis>ResourceManager:</emphasis>
                                    Your cluster should contain at least 1 resource manager instances of YARN.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>NodeManager:</emphasis>
                                    Your cluster should contain at least 2 node manager instances of YARN.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>Spark:</emphasis>
                                    Your cluster should contain at least one instance of Spark if you want to do data
                                    processing through Spark to submit your jobs to the system.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </listitem>
            </orderedlist>
            <note>
                <title>Multiple Services per Node</title>
                <para> 
                    The previous structure gave a very simple overview of the components that are needed for
                    a HOPstart cluster to work correctly. It is viable to allocate various services in one machine or
                    group of machines as we will see in the following sections.
                </para>
            </note>
        </para>
        <para>
            Now that we have a general perspective of how a cluster looks like, the next step is to identify
            the environment of your choice for the cluster you want to work with. In the following sections,
            we will describe how you can define the structure for virtualized cloud providers like Amazon EC2 
            and OpenStack or in a physical baremetal environment.
        </para>
    </section>
  

</section>
