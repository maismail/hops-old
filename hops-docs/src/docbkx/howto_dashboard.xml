<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:ns5="http://www.w3.org/2000/svg"
         xmlns:ns4="http://www.w3.org/1998/Math/MathML"
         xmlns:ns3="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook"
         xml:id="ch03">
    <title>Dashboard</title>
    
    <para>In this section we will give an overview of our HOPStart Dashboard web based application.
        This web application was design with Hadoop administrators in mind so they can easily monitor, 
        define and maintain your HOPStart cluster through only one endpoint. This simplifies hadoop 
        administrator's job by having all the necessary information of the hadoop cluster gathered in one
        place and presented in an effective manner. Also it is possible to execute maintanance commands
        through the different terminals available for services like MySQL, HDFS or Spark.
    </para>
    <para>
        When you launch the dashboard for the first time, you will need to configure some parameters to 
        get starting with HOPStart. In order to access the dashboard, use the credentials you specified in the
        HOPStart Portal when you where preparing to launch the dashboard 
        <xref linkend="ch02"/>. 
        Once you login, if you press your user icon you will have a menu with the following options:
        <itemizedlist>
            <listitem>
                <para>
                    Change password
                </para>
            </listitem>
            <listitem>
                <para>
                    Edit Graphs
                </para>
            </listitem>
            <listitem>
                <para>
                    Backup/Restore
                </para>
            </listitem>
            <listitem>
                <para>
                    Setup Credentials
                </para>    
            </listitem>
        </itemizedlist>
        We will go over this options in detail in the following sections.
    </para>
    <sect1>
        <title>Change Password</title>
        <para>
            This option will give the user the functionality to change their password if they need to do it. For 
            now this functionality is not implemented.
        </para>
    </sect1>
    <sect1>
        <title>Edit Graphs</title>
        <para>
            HOPStart Dashboard offers great customization of how you want to display the data retrieved
            from the HOPSagents allocated in each one of the nodes that compose your cluster. Selecting this
            option will bring you to a new view where you can define the graphs for the different services
            of HOPstart.
        </para>
        <figure xml:id="dash-graphs">
            <title>Edit Graphs</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-edit-graphs.png" scale="30"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            You can define your graphs through two different options that are visible on this new view:
            <itemizedlist>
                <listitem>
                    <para>
                        <emphasis>New:</emphasis>
                    
                        Selecting this option will open a new dialog where you can define the main specifications
                        of your graph for a certain type of element monitored by the dashboard.
                    </para>
                    <figure xml:id="dash-new-graphs">
                        <title>New Graph Editor</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="media/dash-new-graphs.png" scale="30"></imagedata>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Import:</emphasis>
                        It is also possible to import the graphs from a graph file written in JSON, this is the quickest way
                        if you want to load a large number of graphs quite easily
                    </para>
                    <figure xml:id="dash-import-graphs">
                        <title>Import Graphs</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="media/dash-import-graphs.png" scale="30"></imagedata>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </listitem>
            </itemizedlist>
        </para>  
        <para>
            When graphs are generated, they are stored in the graph database and running in the dashboard.
            In the graph tables, it is possible to view all the graphs for a specific type of service or component 
            the dashboard is capable of monitoring. Choosing a entry with the zoom icon, will generate a dialog
            box where you can see more details of the graph entry.
        </para>
        <figure xml:id="dash-selected-graphs">
            <title>Graph Selection Detail</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-detail-graphs.png" scale="30"></imagedata>
                </imageobject>
            </mediaobject>
        </figure> 
    </sect1>
     <sect1>
        <title>Backup/Restore</title>
        <para>
            The Backup/Restore option allows the user to do 2 things, one is to do a whole backup of the
            dashboard state stored in the database in case of failure, maintenance or any other reasons.
            The other option is to restore the dashboard's state from a previous backup which was obtained
            from the dashboard.
        </para>
    </sect1>
    <sect1>
        <title>Setup Credential</title>
        <para>To give dashboard access to your cloud provider, you must supply credentials for it first. To do that go to the rightmost upside bar (perspective bar) and select 
            "Setup Credentials". There you would see 
            <xref linkend="dash-credentials"/>, it that page you activate settings for the provider you wanna use and fill in the creadential information.
        </para>
        <figure xml:id="dash-credentials">
            <title>Cloud Credentials</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-credentials.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>   
    </sect1>
   
    
    <sect1>
        <title>Cluster Definition</title>
        <para>In each cluster, top level stuff that are defined are services, each service consists of a few roles and each role is played by a one or number of machines. In the 
            dashboard if you step into "Manage Clusters" you will see table of available clusters if you have already something defined, besides, you can define your own cluster. 
            You can either choose to restore cluster definition from YML file or you can start defning new one by using GUI wizard as in /ref-def-cluster0.
        </para>
        <figure xml:id="dash-manage-cluster">
            <title>Manage Cluster</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-manage-cluster.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <figure xml:id="dash-common-cluster">
            <title>Common Cluster Options</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-cluster-common.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <figure xml:id="dash-provider-cluster">
            <title>Cluster Provider Options</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-cluster-provider.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <figure xml:id="dash-groups-cluster">
            <title>Cluster Group</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-cluster-groups.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>       
        <figure xml:id="dash-cluster-confirmation">
            <title>Common Cluster Options</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-cluster-confirmation.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>   
        <figure xml:id="dash-bare-cluster">
            <title>Bare Metal Cluster</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-bare-common.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <figure>
            <title>Bare Metal Groups</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-bare-groups.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <figure>
            <title>Bare Metal Group Detail</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-bare-group-detail.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>
        </figure>
        <figure>
            <title>Bare Metal Confirmation</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-bare-confirmation.png" scale="50"></imagedata>
                </imageobject>
            </mediaobject>

        </figure>   
        <para>In the cloud provider wizard choose your cloud provider, git repository of installation recepiet code, the global recepiet and global ports. In the second page you
            need to define your providers detail which proceeds to group nodes in the third page. After you finish this you will see summary of your cluster in last page.
        </para>
        <para>If you choose to setup your cluster on bare metal machines, after you specifying intial stuff in the first page you must define your node groups and the machines 
            blonging into each group in the second page and finally you will see defnition of your cluster in the latest page.
        </para>
        <para>Having clusters defined, you can choose one and modify its defintion in "Modify Cluster" page.</para>    

    </sect1>
    
    <sect1>
        <title>Monitoring</title>
        <para>Dashboard supplies you with number of views and graphs to watch status of the resources in your clusters. You can browes your physical resources, services that are 
            functioning, status of the processes that are run on each machine and performance of all resources.
        </para>
        <para>To begin with, as you step into the "Clusters" page, you will see table of available cluster with the short summary of your cluster. This summary displays all the 
            services, it they are active or stopped processing, its availabale roles and aggregated availabe of memory, cores and disk space. If you click on one of the services 
            you will get into service page with its health summary. By selecting one role, you will be lead into the detail page of that role wich shows all instances of the role and
            machines that have that role running. After all, you can get into detail of each machine, number cores it has, its ip address, its failure status, the average load, amount 
            of memory and disk space. There is also another section that you can find tail of the logs of each machine that could be useful in case of failuer and malfunctioning.
        </para>
        <para>It is also possible to have some graphs for the cluster, in the perspective bar if you select "Edit Graphs", you will see that you can import graph definitions or 
            define your own. Graphs are defined in a JSON format, they are defined for a service or a role, therefore you need to specify type of the graph at the time of importing or
            defining new one. In case you import/define graphs in the dashboard, they will show up in the bottom page of the related views such as services, roles oir hosts.
        </para>
    </sect1>
    
    <sect1>
        <title>Backup</title>
        <para>Your dashboard setup can be always backed up or restored to/from a file presentation. You can find it under the perspective bar, which is "Backup/Restore".</para>
    </sect1>
</chapter>
