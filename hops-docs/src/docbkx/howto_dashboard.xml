<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:ns5="http://www.w3.org/2000/svg" xmlns:ns4="http://www.w3.org/1998/Math/MathML" xmlns:ns3="http://www.w3.org/1999/xhtml" xmlns:db="http://docbook.org/ns/docbook" xml:id="ch03">
    <title>Hop Dashboard</title>
    
    <para>Hop Dashboard is a web application designed with Hadoop administrators in mind. Hop
        Dashboard provides a centralized end-to-end management and monitoring application for HOP
        distribution. It simplifies Hadoop administrator's job by having all the necessary
        statistics of the Hadoop cluster gathered in one place and presented in an effective manner.
        Also it is possible to execute maintanance commands through the different terminals
        available for services like MySQL, HDFS or Spark. </para>
    <para>You will need to configure certain parameters when the Hop Dashboard is launched for the
        first time. In order to access the dashboard, use the credentials you specified in the Hop
        Portal when you where preparing to launch the dashboard <xref linkend="ch02"/>. After login,
        if you press your user icon you will have a menu with the following options: <itemizedlist>
            <listitem>
                <para> Change password </para>
            </listitem>
            <listitem>
                <para> Edit Graphs </para>
            </listitem>
            <listitem>
                <para> Backup/Restore </para>
            </listitem>
            <listitem>
                <para> Setup Credentials </para>
            </listitem>
        </itemizedlist> We will go these options in more detail in the following sections. </para>
    <sect1>
        <title>Change Password</title>
        <para>This is currently under development.  </para>
    </sect1>
    <sect1>
        <title>Edit Graphs</title>
        <para>Hop Dashboard offers customization of how the data is displayed that is retrieved from
            the Hop agents located in each node of the cluster. Selecting this option will enable
            you to define the graphs for the different services of Hop. </para>
        <figure xml:id="dash-graphs">
            <title>Edit Graphs</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-edit-graphs.png" align="center" scalefit="1" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para> You can define your graphs through two different options that are visible on this new
            view: <itemizedlist>
                <listitem>
                    <para>
                        <emphasis>New</emphasis> Selecting this option will open a new dialog where
                        you can define the specifications for new graph for statistics monitored by
                        the dashboard. </para>
                    <figure xml:id="dash-new-graphs">
                        <title>Graph Editor</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="media/dash-new-graphs.png" align="center"
                                    scalefit="1" width="650"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Import</emphasis> It is also possible to import the graphs
                        speicfications from a JSON graph file. This is the quickest way if you want
                        to load a large number of graphs. </para>
                    <figure xml:id="dash-import-graphs">
                        <title>Import Graphs</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="media/dash-import-graphs.png" align="center"
                                    scalefit="1" width="650"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </listitem>
            </itemizedlist>When graphs are generated, they are stored in the database and loaded in
            the dashboard. In the graph table, it is possible to view all the graphs for a specific
            type of service or component that the dashboard is monitoring. Pressing the zoom button
            will generate a dialog box where you can see more details about the graph. </para>
        <figure xml:id="dash-selected-graphs">
            <title>Graph Selection Detail</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-detail-graphs.png" align="center" scalefit="1.5" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>
    </sect1>
    <sect1>
        <title>Backup/Restore</title>
        <para>It takes backup of the whole dashboard state stored in the database. Incase of failure
            or maintenence the dashboard can restore the previous states from a backup file obtained
            from the dashboard. </para>
        <figure xml:id="dash-backup">
            <title>Backup/Restore</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-backup-restore.png" align="center" scalefit="1" width="500"/>
                </imageobject>
            </mediaobject>
        </figure> 
    </sect1>
    <sect1>
        <title>Setup Credentials</title>
        <para>It allows the user to setup the credentials that are used when the dashboard deploys a
            cluster. These are important configuration parameters. Cluster deployment will fail if
            these parameteres are not set properly.  </para>
        <figure xml:id="dash-credentials">
            <title>Setup Credentials</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-credentials.png" align="center" scalefit="1" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>   
    </sect1>
   
    
    <sect1>
        <title>Cluster Management</title>
        <para>Cluster mangement is an interesting feature in the Hop Dashboard. The dashboad keeps
            track of diffenent cluster applications deployed in the cloud. It allows the
            administrators to create, delete, edit, load and export clusters.  </para>
        <figure xml:id="dash-manage-cluster">
            <title>Manage Cluster</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-manage-cluster.png" align="center" scalefit="1" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            <itemizedlist>
                <listitem>
                    <para><emphasis>Create Cluster</emphasis> Selecting this option will take you to
                        the cluster generation wizard where a users can of generate their own
                        clusters for Hop. In the next chapter, we will explain in detail how users
                        can create their custom clusters using our Cluster Definition Language, see
                            <xref linkend="ch04">Chapter 4: Defining Clusters</xref>. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Delete Clusters</emphasis> This option will delete a selected
                        cluster. It is possible to delete multiple clusters at once by shift
                        clicking multiple clusters before selecting this option. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Edit Selected Cluster</emphasis> This option will allow a user
                        to edit an existing stored cluster. This will bring the cluster generation
                        wizard with the values of the selected cluster. Administrators can use this
                        wizard to modify the cluster. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Load Selected Cluster</emphasis> This option allows the user to
                        load one of the stored clusters into the cluster launcher. Cluster launcer
                        is used to deploy the cluster in the cloud. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Export Cluster</emphasis> It saves the information about the
                        cluster in  a YAML file. </para>
                </listitem>
            </itemizedlist>
        </para>
    </sect1>
    <sect1>
        <title>Cluster Deployment Progress</title>
        <para>Hop Dashboard monitors the all the nodes deployed in the cluster. It displays the
            history of all the nodes going through multiple phases of the deployment cycle. A
            progress bar appears over each of the entries in the table showing the deployment stage
            progress of the nodes. A cluster node goes through the following phases during
            deployment. <itemizedlist>
                <listitem>
                    <para><emphasis>Waiting:</emphasis> An entry has been generated in the node
                        scheduler but no node creation query has been yet been sent to the cloud
                        provider.</para>
                </listitem>
                <listitem>
                    <para><emphasis>Creation:</emphasis> The scheduler has submitted the query to
                        the cloud provider and it is waiting for the cloud provider to finish
                        deploying the virtual instance. When an instance is successfully created an
                        initialization script is executed for preliminary configuration of the node.
                    </para>
                </listitem>
                <listitem>
                    <para><emphasis>Install:</emphasis> After the node is successfully commissioned,
                        chef installs recipes for Hop Services to fetch the necessary binaries from
                        the different repositories. This phase is optional in case of using pre
                        built virtual instances which contain Hop binaries. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Configure:</emphasis> A node in this phase means, that; the node
                        is receiving the configuration script which will execute chef with the
                        selected recipes for the services defined for that node. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Complete:</emphasis> The node has successfully finished
                        executing the configuration script with chef and it is now part of the
                        working cluster. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Retrying:</emphasis> The deployment system has detected a
                        problem during a node deployment phase and it is retrying to recover from
                        the failure. It retries the failed phase script for five times.</para>
                </listitem>
                <listitem>
                    <para><emphasis>Error:</emphasis> When all the retires are exhausted the node is
                        marked erroneous. Hadoop administrator can to take further actions to
                        recover the node, for example, SSH into the failed node and the fix the
                        problem manually, retry the deployment process or delete the failed
                        nodes.</para>
                </listitem>
            </itemizedlist><figure>
                <title>Clusters Progress</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-clusters-progress.png" align="center"
                            scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure></para>
    </sect1>
    <sect1>
        <title>Monitoring</title>
        <para>Hop Dashboard lets monitor hosts, alters and Hop clusters in real time. Brie <itemizedlist>
                <listitem>
                    <para><emphasis>Hosts:</emphasis> Information and data analytics of all the
                        nodes the dashboard is monitoring. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Alerts:</emphasis> List of all alerts sent to the Dashboard by
                        the Hop agents running on all the nodes of the cluster. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Clusters:</emphasis> A drop down list with the available
                        clusters been monitored by the dashboard. Selecting an entry will give
                        further information of the state of that cluster. </para>
                </listitem>
            </itemizedlist>
        </para>
        <sect2>
            <title>Hosts</title>
            <para>This view allows a user to get a general overview of the state of all the nodes in
                all the clusters, you will be able to track information of great interest like the
                allocated ip's for that node, its hostname, host ID, its current health in the
                system, and when the last heartbeat was received. Also it shows information about
                the nodes available resources like the number of cores that machine has, the load
                average in that instance in the last 1, 5 15 min, disk usage and physical memory in
                use. </para>
            <figure>
                <title>Hosts</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-hosts.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>   
            <para>
                By clicking in one of the host ID's entries, it will show a detailed view of the hosts monitoring analytics
                with the graphs that are available for the Hosts components. See the previous Edit Graphs section,
                where we explained how users can create graphs for the dashboards monitoring components.
            </para>
            <figure>
                <title>Hosts Details-Services</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-host-detail.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>Hosts Details Graphs</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-host-detail-2.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>     
        </sect2>
        <sect2>
            <title>Alerts</title>
            <para>
                This view allows a user to keep track of the whole history of alerts submitted by the
                Hop agents. Here you will see for each entry an alert submitted by one of the agents
                containing the message provided by that alert plus the date the message was generated,
                the severity of the alert and the host ID that triggered the alert. Also further information is provided
                with the alert like the source that originated the alert and other parameters that help to track
                the source of the alert.
            </para>
            <figure>
                <title>Alerts</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-alerts.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>    
        </sect2>
        <sect2>
            <title>Clusters</title>
            <para>
                Selecting this option from the main Dashboard toolbar, will generate a dropdown list with all the 
                available clusters been actually monitored by the dashboard. From here you can navigate and get
                further detail of the cluster and the current status of the services running in that cluster. This 
                allows a user to navigate through the different Hop services and sub roles allowing the user
                to grasp a deep understanding of what is currently going on each of the services.               
            </para>
            <figure>
                <title>Clusters</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-clusters.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>
                From the previous image, we can see a top level overview of each cluster with general information
                on the status of that cluster. This contains information on the number of nodes that compose that
                cluster, the current health of the cluster and the number of hosts involved in the cluster. Also it
                keeps track of the resources allocated on that cluster like the total number of cores which compose
                the overall computing power of the cluster, the total disk capacity and the total physical memory 
                capacity. Selecting a cluster entry will bring a more detailed view of that cluster.
            </para>   
            <figure>
                <title>Cluster Detail</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-cluster-detail.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>
                In this new view, we can see that we have gone further inside the services the cluster consists of
                and here the user can identify the status of each of the services that are part of the current cluster
                instance. Selecting one of the services will show greater detail of information of the service. We will
                see how it looks like each view for each of the services that form the HOP. Note that in order
                for the graphs to appear, a user needs to configure the specific graph for the specific component, refer to
                the Edit Graph section found in this chapter.
            </para>
            <sect3>
                <title>YARN monitoring</title>
                <para>
                    If YARN is enabled in your cluster, you can get highly detailed information of YARN like the total
                    amount of resource managers and node managers, and metrics of interest for YARN
                    monitoring.
                    </para>
                    <figure>
                <title>YARN Metrics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-metrics.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            <para>
                If you select one of the components that form part of the YARN ecosystem, you will get more
                information on that specific component.
            </para>
            <figure>
                <title>Resource Manager Metrics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-resource.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>Node Manager Metrics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-manager.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            <para>
                If you select the corresponding web UI link that appears in one of the YARN components, it will
                load the respective Hadoop information Web UI with more detailed information of that component.
            </para>
            
            <figure>
                <title>Resource Manager UI</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-resourceUI.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
               <figure>
                <title>Node Manager UI</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-managerUI.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure> 
            </sect3>
            <sect3>
                <title>MySQL Cluster</title>
                <para>
                    You can get a highly detailed view of what is happening in MySQL cluster after deploying a 
                    Hop cluster. You can keep track of statistics of interest in order to keep the performance
                    of your MySQL Cluster in good shape. If you select the MySQL you can obtain the following information
                    if the graphs are configured accordingly, see Edit Graph section in this chapter.
                </para>
                 <figure>
                <title>MySQL overall graphs</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-MYSQL-graphs.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
                 <para>
                     We also offer additional functionality for users to maintain and manage the status of their
                     MySQL cluster without the need to connecting directly to the machine. We provide an online
                     terminal where users can execute mysql commands directly to the MySQL cluster without any
                     delay.
                 </para>
                  <figure>
                <title>MySQL console</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-MYSQL-console.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            </sect3>
            <sect3>
                <title>HOPS HDFS (Hadoop Filesystem)</title>
                <para>
                   You can get a highly detailed view of what is happening in the Hop file system after deploying a 
                    Hop cluster. You can keep track of statistics of interest in order to keep the performance
                    of your Hop system in good shape. If you select the Hop option you can obtain information
                    from the graphs previously configured in the Edit Graph section.
                </para>
                <para>
                    We also offer additional functionality for users to manage the file system without the need to 
                    connecting directly to the machine. We provide an online terminal where users can execute 
                    hdfs commands directly to the file system without any delay.
                </para>
                <figure>
                <title>HOP console</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-HOP-console.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            </sect3>
        </sect2>
    </sect1>
    
   
</chapter>
