<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:ns5="http://www.w3.org/2000/svg" xmlns:ns4="http://www.w3.org/1998/Math/MathML" xmlns:ns3="http://www.w3.org/1999/xhtml" xmlns:db="http://docbook.org/ns/docbook" xml:id="ch03">
    <title>Hop Dashboard</title>
    
    <para>Hop Dashboard is a web application designed with Hadoop administrators in mind. Hop
        Dashboard provides a centralized end-to-end management and monitoring application for HOP
        distribution. It simplifies Hadoop administrator's job by having all the necessary
        statistics of the Hadoop cluster gathered in one place and presented in an effective manner.
        Also it is possible to execute maintanance commands through the different terminals
        available for services like MySQL, HDFS or Spark. </para>
    <para>You will need to configure certain parameters when the Hop Dashboard is launched for the
        first time. In order to access the dashboard, use the credentials you specified in the Hop
        Portal when you where preparing to launch the dashboard <xref linkend="ch02"/>. After login,
        if you press your user icon you will have a menu with the following options: <itemizedlist>
            <listitem>
                <para> Change password </para>
            </listitem>
            <listitem>
                <para> Edit Graphs </para>
            </listitem>
            <listitem>
                <para> Backup/Restore </para>
            </listitem>
            <listitem>
                <para> Setup Credentials </para>
            </listitem>
        </itemizedlist> We will go these options in more detail in the following sections. </para>
    <sect1>
        <title>Change Password</title>
        <para>This is currently under development.  </para>
    </sect1>
    <sect1 xml:id="edit_graphs">
        <title>Edit Graphs</title>
        <para>Hop Dashboard offers customization of how the data is displayed that is retrieved from
            the Hop agents located in each node of the cluster. Selecting this option will enable
            you to define the graphs for the different services of Hop. </para>
        <figure xml:id="dash-graphs">
            <title>Edit Graphs</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-edit-graphs.png" align="center" scalefit="1" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para> You can define your graphs through two different options that are visible on this new
            view: <itemizedlist>
                <listitem>
                    <para>
                        <emphasis>New</emphasis> Selecting this option will open a new dialog where
                        you can define the specifications for new graph for statistics monitored by
                        the dashboard. </para>
                    <figure xml:id="dash-new-graphs">
                        <title>Graph Editor</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="media/dash-new-graphs.png" align="center"
                                    scalefit="1" width="650"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </listitem>
                <listitem>
                    <para>
                        <emphasis>Import</emphasis> It is also possible to import the graphs
                        speicfications from a JSON graph file. This is the quickest way if you want
                        to load a large number of graphs. </para>
                    <figure xml:id="dash-import-graphs">
                        <title>Import Graphs</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="media/dash-import-graphs.png" align="center"
                                    scalefit="1" width="650"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </listitem>
            </itemizedlist>When graphs are generated, they are stored in the database and loaded in
            the dashboard. In the graph table, it is possible to view all the graphs for a specific
            type of service or component that the dashboard is monitoring. Pressing the zoom button
            will generate a dialog box where you can see more details about the graph. </para>
        <figure xml:id="dash-selected-graphs">
            <title>Graph Selection Detail</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-detail-graphs.png" align="center" scalefit="1.5" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>
    </sect1>
    <sect1>
        <title>Backup/Restore</title>
        <para>It takes backup of the whole dashboard state stored in the database. Incase of failure
            or maintenence the dashboard can restore the previous states from a backup file obtained
            from the dashboard. </para>
        <figure xml:id="dash-backup">
            <title>Backup/Restore</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-backup-restore.png" align="center" scalefit="1" width="500"/>
                </imageobject>
            </mediaobject>
        </figure> 
    </sect1>
    <sect1>
        <title>Setup Credentials</title>
        <para>It allows the user to setup the credentials that are used when the dashboard deploys a
            cluster. These are important configuration parameters. Cluster deployment will fail if
            these parameteres are not set properly.  </para>
        <figure xml:id="dash-credentials">
            <title>Setup Credentials</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-credentials.png" align="center" scalefit="1" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>   
    </sect1>
   
    
    <sect1>
        <title>Cluster Management</title>
        <para>Cluster mangement is an interesting feature in the Hop Dashboard. The dashboad keeps
            track of diffenent cluster applications deployed in the cloud. It allows the
            administrators to create, delete, edit, load and export clusters.  </para>
        <figure xml:id="dash-manage-cluster">
            <title>Manage Cluster</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="media/dash-manage-cluster.png" align="center" scalefit="1" width="650"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>
            <itemizedlist>
                <listitem>
                    <para><emphasis>Create Cluster</emphasis> Selecting this option will take you to
                        the cluster generation wizard where a users can of generate their own
                        clusters for Hop. In the next chapter, we will explain in detail how users
                        can create their custom clusters using our Cluster Definition Language, see
                            <xref linkend="ch04">Chapter 4: Defining Clusters</xref>. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Delete Clusters</emphasis> This option will delete a selected
                        cluster. It is possible to delete multiple clusters at once by shift
                        clicking multiple clusters before selecting this option. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Edit Selected Cluster</emphasis> This option will allow a user
                        to edit an existing stored cluster. Administrators can use this
                        wizard to modify the cluster. They can choose 2 ways to edit a cluster from the entry, they
                        can reuse the cluster wizard or they can choose to use the embedded YAML editor available
                        in the dashboard.</para><figure>
                <title>Select edit mode:</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-edit-select.png" align="center"
                            scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>
                If we select the Online editor option, it will open the selected YAML cluster into a new code editor 
                window which follows the YAML syntax.
            </para>
            <figure>
                <title>YAML Editor</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-yamleditor.png" align="center"
                            scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
                        
                </listitem>
                <listitem>
                    <para><emphasis>Load Selected Cluster</emphasis> This option allows the user to
                        load one of the stored clusters into the cluster launcher. Cluster launcer
                        is used to deploy the cluster in the cloud. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Export Cluster</emphasis> It saves the information about the
                        cluster in  a YAML file. </para>
                </listitem>
            </itemizedlist>
        </para>
    </sect1>
    <sect1>
        <title>Cluster Deployment Progress</title>
        <para>Hop Dashboard monitors the all the nodes deployed in the cluster. It displays the
            history of all the nodes going through multiple phases of the deployment cycle. A
            progress bar appears over each of the entries in the table showing the deployment stage
            progress of the nodes. A cluster node goes through the following phases during
            deployment. <itemizedlist>
                <listitem>
                    <para><emphasis>Waiting:</emphasis> An entry has been generated in the node
                        scheduler but no node creation query has been yet been sent to the cloud
                        provider.</para>
                </listitem>
                <listitem>
                    <para><emphasis>Creation:</emphasis> The scheduler has submitted the query to
                        the cloud provider and it is waiting for the cloud provider to finish
                        deploying the virtual instance. When an instance is successfully created an
                        initialization script is executed for preliminary configuration of the node.
                    </para>
                </listitem>
                <listitem>
                    <para><emphasis>Install:</emphasis> After the node is successfully commissioned,
                        chef installs recipes for Hop Services to fetch the necessary binaries from
                        the different repositories. This phase is optional in case of using pre
                        built virtual instances which contain Hop binaries. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Configure:</emphasis> A node in this phase means, that; the node
                        is receiving the configuration script which will execute chef with the
                        selected recipes for the services defined for that node. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Complete:</emphasis> The node has successfully finished
                        executing the configuration script with chef and it is now part of the
                        working cluster. </para>
                </listitem>
                <listitem>
                    <para><emphasis>Retrying:</emphasis> The deployment system has detected a
                        problem during a node deployment phase and it is retrying to recover from
                        the failure. It retries the failed phase script for five times.</para>
                </listitem>
                <listitem>
                    <para><emphasis>Error:</emphasis> When all the retires are exhausted the node is
                        marked erroneous. Hadoop administrator can to take further actions to
                        recover the node, for example, SSH into the failed node and the fix the
                        problem manually, retry the deployment process or delete the failed
                        nodes.</para>
                </listitem>
            </itemizedlist><figure>
                <title>Clusters Progress</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-clusters-progress.png" align="center"
                            scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure></para>
    </sect1>
    <sect1>
        <title>Monitoring</title>
        <para>Hop Dashboard monitors hosts, alters and Hop clusters in real time. Brief overview of
            the monitoring tool is given below.   </para>
        <sect2>
            <title>Hosts</title>
            <para>The host monitoring tools shows the state of all the nodes in the clusters. An
                administrator can track information of his/her interest such as the allocated IPs
                for the nodes, hostnames, host IDs, health of the nodes in the system, and when the
                last heartbeat was received from the nodes. It also monitors available resources on
                the nodes such as the number of cores that machine has, average load on the
                instance, disk usage and physical memory in use. </para>
            <figure>
                <title>Hosts</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-hosts.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>   
            <para>Selecting the host ID's displays a detailed view of the host's analytics with the
                graphs that are available for the hosts. See the <xref linkend="edit_graphs"/>
                section to create or delete graphs for the dashboards monitoring components. </para>
            <figure>
                <title>Hosts Details-Services</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-host-detail.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>Hosts Details Graphs</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-host-detail-2.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>     
        </sect2>
        <sect2>
            <title>Alerts</title>
            <para>This tools allows the user to view all the alerts submitted by the Hop agents. An
                administrator can query the alert monitoring tool to display alerts of certain
                severity and that were generated in a certain time window. </para>
            <figure>
                <title>Alerts</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-alerts.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>    
        </sect2>
        <sect2>
            <title>Clusters</title>
            <para>Cluster monitoring tool gives a bird eye view of the clusters monitored by the Hop
                Dashboard. It contains information such as number of nodes that compose the cluster
                and the health status of the nodes. Also it keeps track of the resources allocated
                to the cluster such as total number of cores which compose the overall computing
                power of the cluster, the total disk capacity and the total physical memory
                capacity. An administrator can drill down in a cluster to find out list of services
                in the cluster, their status and a list of nodes in each service.  </para>
            <figure>
                <title>Clusters</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-clusters.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>   
            <figure>
                <title>Detailed Cluster View</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-cluster-detail.png" align="center" scalefit="1" width="650"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <sect3>
                <title>YARN monitoring</title>
                <para>YRAN is an important system in Hadoop echo system. Hop Dashboard displays very
                    detailed YARN performance analytics. </para>
                    <figure>
                <title>YARN Metrics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-metrics.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            <para>You, can drill down and see the analytics for the resource and node managers in
                    the YARN echo system. </para>
            <figure>
                <title>Resource Manager Metrics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-resource.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>Node Manager Metrics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-manager.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            <para>Hop dashboard provides a direct access to the resource and node manger web base
                    UIs. Resource manager web UI gives a very detailed infortion such as number of
                    applications submitted, number of applications in progress, number of
                    application completed, total available memory, memory consumed, dead nodes etc.
                    Node manager web UI displays information such as total memory allocated to the
                    java virtual machine on the node, memory allocated to each container, node's
                    healt status, hadoop version etc. </para>
            
            <figure>
                <title>Resource Manager UI</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-resourceUI.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>  
               <figure>
                <title>Node Manager UI</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-YARN-managerUI.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure> 
            </sect3>
            <sect3>
                <title>MySQL Cluster</title>
                <para>In Our implementation the HDFS' the metadata is stored in MySQL Cluster, a
                    distributed, in-memory, highly available relational database. You can monitor
                    the MySQL Cluster using the Hop Dashboard. Its keeps track of data memory, index
                    memory, number of reads and writes per second and number of scans per second. </para>
                 <figure>
                <title>MySQL Cluster Monitor</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-MYSQL-graphs.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
                 <para>Hop Dashboard is designed to make the Hadoop administrator's job easier to
                    manage the cluster. The dashboard provides an online terminal to directly run
                    SQL commands on MySQL Cluster.</para>
                  <figure>
                <title>MySQL Console</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-MYSQL-console.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            </sect3>
            <sect3>
                <title>Hop Distributed File System (HDFS)</title>
                <para>It also provides an online termianl for quering the distributed file system
                    using the HDFS client. It can query the file system to display file listing, cop
                    , move, delete files etc. </para>
                <figure>
                <title>HOP Console</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="media/dash-HOP-console.png" align="center" scalefit="1" width="650"/>
                        </imageobject>
                </mediaobject>
            </figure>
            </sect3>
        </sect2>
    </sect1>
    
   
</chapter>
